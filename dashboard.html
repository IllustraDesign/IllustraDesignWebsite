<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Product Dashboard</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .category { margin-bottom: 20px; }
        .products { display: flex; gap: 10px; flex-wrap: wrap; }
        .product { border: 1px solid #ccc; padding: 10px; cursor: pointer; width: 120px; text-align: center; }
        .product img { width: 100px; height: 100px; object-fit: cover; }
        #detailsPanel { display: none; position: fixed; top: 10%; right: 10%; width: 300px; background: white; padding: 10px; border: 1px solid #ccc; }
    </style>
</head>
<body>
    <h2>Product Dashboard</h2>
    <div id="productsContainer"></div>

    <!-- Product Details Panel -->
    <div id="detailsPanel">
        <img id="detailImage" src="" width="100%">
        <h3 id="detailTitle"></h3>
        <p id="detailDescription"></p>
        <p>Size: <span id="detailSize"></span></p>
        <p>Price: ₹<span id="detailPrice"></span></p>
        <button onclick="closeDetails()">Close</button>
    </div>

    <script>
	async function fetchProducts() {
    try {
        const response = await fetch('https://cors-anywhere.herokuapp.com/https://script.google.com/macros/s/AKfycbzh9cv0Ejmn2ck5pChzFlL6rTOJGzk8j0OjdTqzdlnmHGBu2xOMz_Rj6H6phQ5NTxyY3w/exec');
        const products = await response.json();
        displayProducts(products);
    } catch (error) {
        console.error("Error fetching products:", error);
    }
}

function displayProducts(products) {
    const categories = { Men: [], Women: [], Kids: [] };

    products.forEach(product => {
        if (categories[product.category]) {
            categories[product.category].push(product);
        } else {
            console.warn("Unknown category:", product.category);
        }
    });

    const container = document.getElementById("productsContainer");
    container.innerHTML = "";

    for (const category in categories) {
        if (categories[category].length === 0) continue;

        const section = document.createElement("div");
        section.classList.add("category");
        section.innerHTML = `<h3>${category}</h3><div class='products'></div>`;

        const productsDiv = section.querySelector('.products');

        categories[category].forEach(product => {
            const productDiv = document.createElement("div");
            productDiv.classList.add("product");
            productDiv.innerHTML = `<img src='${product.image}'><br>₹${product.price}`;
            productDiv.onclick = () => showDetails(product);
            productsDiv.appendChild(productDiv);
        });

        container.appendChild(section);
    }
}

function showDetails(product) {
    document.getElementById("detailImage").src = product.image;
    document.getElementById("detailTitle").innerText = product.title;
    document.getElementById("detailDescription").innerText = product.description;
    document.getElementById("detailSize").innerText = product.size;
    document.getElementById("detailPrice").innerText = `₹${product.price}`;
    document.getElementById("detailsPanel").style.display = "block";
}

function closeDetails() {
    document.getElementById("detailsPanel").style.display = "none";
}

// Load products on page load
fetchProducts();

	</script>
</body>
</html>
